machine:
  environment:
    GOROOT:
  services:
    - docker

dependencies:
  cache_directories:
    - go
  pre:
    - bash tests/util/circleci/ensure-go.sh
    - docker version
    - PATH=$PWD/go/bin:$PATH make deps
  override:
    - PATH=$PWD/go/bin:$PATH make build

test:
  override:
    - tests/util/shunit2:
        parallel: true
        files:
          - tests/*.sh
